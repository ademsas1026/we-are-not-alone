define("github-rollup-gist-bootstrap",["invariant","selector-observer","github/query-selector","github/google-analytics","github/throttled-input","github/form","github/fetch","github/code-editor","delegated-events","github/onfocus","github/jquery"],function(e,t,r,n,a,i,o,s,u,l,c){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,c=c&&c.hasOwnProperty("default")?c.default:c;var d,f=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var o=t[a](i),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}},v=(d=f(regeneratorRuntime.mark(function e(t){var r,a,i,o,s,u,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dataTransfer){e.next=3;break}return e.abrupt("return");case 3:a=!0,i=!1,o=void 0,e.prev=6,s=r.files[Symbol.iterator]();case 8:if(a=(u=s.next()).done){e.next=23;break}return l=u.value,n.trackEvent({category:"Interaction",action:"File Drop",label:l.type}),e.prev=11,e.next=14,h(l);case 14:c=e.sent,t.target.dispatchEvent(new CustomEvent("gist:filedrop",{bubbles:!0,detail:c})),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(11);case 20:a=!0,e.next=8;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(6),i=!0,o=e.t1;case 29:e.prev=29,e.prev=30,!a&&s.return&&s.return();case 32:if(e.prev=32,!i){e.next=35;break}throw o;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}},e,this,[[6,25,29,37],[11,18],[30,,32,36]])})),function(e){return d.apply(this,arguments)});function g(e){r.query(document,".js-gist-dropzone").classList.remove("d-none"),e.stopPropagation(),e.preventDefault()}function p(e){var t=e.target;t instanceof Element&&t.classList.contains("js-gist-dropzone")&&t.classList.add("d-none")}function m(e){v(e),r.query(document,".js-gist-dropzone").classList.add("d-none"),e.stopPropagation(),e.preventDefault()}function h(t){return new Promise(function(r,n){var a=new FileReader;a.onload=function(){e("string"==typeof a.result,"app/assets/modules/github/gist/drag-drop.js:71");var i=a.result;i&&!/\0/.test(i)?r({file:t,data:i}):n(new Error("invalid file"))},a.readAsText(t)})}t.observe(".js-gist-dropzone",{add:function(){var t=document.body;e(t,"app/assets/modules/github/gist/drag-drop.js:50"),t.addEventListener("dragenter",g),t.addEventListener("dragleave",p),t.addEventListener("dragover",g),t.addEventListener("drop",m)},remove:function(){var t=document.body;e(t,"app/assets/modules/github/gist/drag-drop.js:58"),t.removeEventListener("dragenter",g),t.removeEventListener("dragleave",p),t.removeEventListener("dragover",g),t.removeEventListener("drop",m)}});var y,b,j=function(){var e=f(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAttribute("data-language-detection-url")){e.next=3;break}return e.abrupt("return");case 3:return n=new URL(r,window.location.origin),(a=new URLSearchParams(n.search.slice(1))).append("filename",t.value),n.search=a.toString(),e.next=9,o.fetchJSON(n);case 9:return i=e.sent,e.next=12,w(t);case 12:e.sent.setMode(i.language);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function x(t){var n=r.query(t,".js-gist-files"),a=document.getElementById("js-gist-file-template");e(a,"app/assets/modules/github/gist/gist-edit.js:18");var i=document.createElement("div");i.innerHTML=a.textContent;var o=!0,s=!1,u=void 0;try{for(var l,c=i.querySelectorAll("[id]")[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){l.value.removeAttribute("id")}}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}var d=i.querySelector(".js-code-textarea");null!=d&&d.setAttribute("id","blob_contents_"+Date.now());var f=!0,v=!1,g=void 0;try{for(var p,m=i.children[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var h=p.value;n.append(h)}}catch(e){v=!0,g=e}finally{try{!f&&m.return&&m.return()}finally{if(v)throw g}}var y=n.lastElementChild;return e(y,"app/assets/modules/github/gist/gist-edit.js:37"),y}function E(e){var t=!0,n=!1,a=void 0;try{for(var i,o=e.querySelectorAll(".js-gist-file")[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value,u=r.query(s,".js-gist-filename",HTMLInputElement),l=r.query(s,".js-blob-contents",HTMLTextAreaElement);if(!u.value&&!l.value)return s}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}return x(e)}function w(e){return s.getAsyncCodeEditor(r.closest(e,".js-code-editor"))}function L(e){return r.querySelectorAll(e,".js-code-textarea",HTMLTextAreaElement).some(function(e){return e.value.trim().length>0})}function T(){var t=!0,n=!1,a=void 0;try{for(var i,o=r.querySelectorAll(document,".js-gist-create",HTMLButtonElement)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value,u=s.form;e(u,"app/assets/modules/github/gist/gist-edit.js:66"),s.disabled=!L(u)}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}}function q(e){var t=e.querySelectorAll(".js-remove-gist-file"),r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){i.value.classList.toggle("d-none",t.length<2)}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}}u.on("change",".js-code-textarea",function(){T()}),l.onFocus(".js-gist-filename",(y=f(regeneratorRuntime.mark(function t(n){var i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e((i=n)instanceof HTMLInputElement,"app/assets/modules/github/gist/gist-edit.js:98"),o=r.closest(n,".js-code-editor"),t.next=5,w(o);case 5:a.addThrottledInputEventListener(i,j),n.addEventListener("blur",function(){return a.removeThrottledInputEventListener(i,j)},{once:!0});case 7:case"end":return t.stop()}},t,void 0)})),function(e){return y.apply(this,arguments)})),u.on("click",".js-add-gist-file",function(e){e.preventDefault(),x(r.closest(e.currentTarget,".js-blob-form")).scrollIntoView()}),u.on("gist:filedrop",".js-blob-form",(b=f(regeneratorRuntime.mark(function t(n){var a,i,o,s,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e(n instanceof CustomEvent,"app/assets/modules/github/gist/gist-edit.js:112"),a=n.detail,i=a.file,o=a.data,s=E(n.currentTarget),(u=r.query(s,".js-gist-filename",HTMLInputElement)).value=i.name,j(u),t.next=8,w(u);case 8:t.sent.setCode(o),s.scrollIntoView();case 11:case"end":return t.stop()}},t,this)})),function(e){return b.apply(this,arguments)})),u.on("click",".js-remove-gist-file",function(e){e.preventDefault();var t=r.closest(e.currentTarget,".js-gist-file"),n=!0,a=!1,i=void 0;try{for(var o,s=r.querySelectorAll(t,".js-gist-deleted input",HTMLInputElement)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.disabled=!1}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}r.query(t,".js-code-editor").remove()}),t.observe(".js-gist-create",T),t.observe(".js-remove-gist-file",function(e){var t=r.closest(e,".js-gist-files");return{add:function(){q(t)},remove:function(){q(t)}}}),u.on("details-menu-selected",".js-gist-share-menu",function(t){var n=t.currentTarget,a=t.target;e(a instanceof HTMLButtonElement,"app/assets/modules/github/gist/share.js:10"),r.query(n,".js-url-field",HTMLInputElement).value=a.value}),c(document).on("ajaxComplete",".js-gist-file-update-container .js-comment-update",function(e,t){if(200===t.status){var n=JSON.parse(t.responseText);if(e.currentTarget.action=n.url,n.authenticity_token)r.query(e.currentTarget,"input[name=authenticity_token]",HTMLInputElement).value=n.authenticity_token}})});

//# sourceMappingURL=gist-3f91338364997e340632f39467cea544.js.map
